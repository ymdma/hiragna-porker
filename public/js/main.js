!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(2),e.exports=n(1)},function(e,t,n){},function(e,t,n){"use strict";n.r(t),console.log("indexの読み込み1"),console.log("SUB読み込み");let o=["あ","い","う","え","お","か","き","く","け","こ","さ","し","す","せ","そ","た","ち","つ","て","と","な","に","ぬ","ね","の","は","ひ","ふ","へ","ほ","ま","み","む","め","も","や","ゆ","よ","ら","り","る","れ","ろ","わ","を","ん"].concat();for(var a=o.length-1;a>0;a--){var r=Math.floor(Math.random()*(a+1)),l=o[a];o[a]=o[r],o[r]=l}let c,d,i=o.slice(41,46),s=o.slice(36,41),m={name:"とり",avatar:"./image/tori.png",handCards:[],changesLeft:4,description:"",winner:!1},u={name:"いぬ",avatar:"./image/inu.png",handCards:[],changesLeft:4,description:"",winner:!1},g={name:"",player:m,avatar:"",handCards:null,description:"",changesLeft:4,sortNow:!1,sortEnd:!1,finishedPlayer:0,gameStage:"firstStage",ReScrollPoint:"first"};document.addEventListener("DOMContentLoaded",()=>{A(),M(),H(),P(),w(),N(),D(),R(),F(),W(),j(),O()}),window.addEventListener("scroll",()=>{let e;e||(e=setTimeout((function(){e=0,h()}),2e3))}),window.addEventListener("resize",(function(e){let t=document.documentElement.clientHeight,n=t,o=2*t,a=3*t;switch(g.ReScrollPoint){case"first":r(0);break;case"sort":r(n);break;case"description":r(o);break;case"result":r(a)}function r(e){scrollTo(0,e),console.log("スクロール動作 :補正")}}));let y=document.documentElement.clientHeight,p=y,B=2*y,f=3*y;function h(){switch(g.gameStage){case"firstStage":e(0);break;case"sortStage":e(p);break;case"descriptionStage":e(B);break;case"resultStage":e(f)}function e(e){scrollTo(0,e),console.log("スクロール動作:ジャンプ"),console.log(p)}}function E(e){e.classList.contains("is-hidden")?e.classList.remove("is-hidden"):(e.classList.add("is-hidden"),console.log("isHidden作動"))}function I(e,t){e.setAttribute("disabled",t)}function L(e){"false"==e.getAttribute("aria-expanded")?e.setAttribute("aria-expanded","true"):e.setAttribute("aria-expanded","false")}const A=()=>{const e=document.getElementById("startBtn"),t=document.getElementById("toriFirst"),n=document.getElementById("inuFirst");e.addEventListener("click",(function(){const o=document.getElementById("firstAttackSelectModal");E(o),g.gameStage="firstStage",g.ReScrollPoint="first";const a=document.getElementById("startFlag");function r(){a.setAttribute("aria-expanded",!0)}function l(){a.classList.add("is-hidden")}function c(){a.animate({opacity:[1,0,1]},{duration:1700,iterations:1})}function d(){a.animate({opacity:[1,0]},{duration:2e3,easing:"ease-in-out",fill:"forwards"})}t.onclick=()=>{S(),E(o),I(e,!0),E(e.parentNode),E(a),setTimeout(r,300),setTimeout(c,1500),setTimeout(d,4800),setTimeout(l,6800)},n.onclick=()=>{b(),E(o),I(e,!0),E(e.parentNode),E(a),setTimeout(r,300),setTimeout(c,1500),setTimeout(d,4500),setTimeout(l,6800)},document.addEventListener("keydown",e=>{"Escape"===e.key&&E(o)})}),!1)},S=()=>{console.log("とり開始"),g.name=""+m.name,g.player=m,g.sortNow=!1,g.changesLeft=4,g.avatar="./image/tori.png",g.handCards=i,g.description="",g.acted=!1,c=m.name,d=u.name,console.log(g),console.log(c),console.log(d),T(),C(),v()},b=()=>{console.log("いぬ開始"),g.name=""+u.name,g.player=u,g.sortNow=!1,g.changesLeft=4,g.avatar="./image/inu.png",g.handCards=i,g.description="",g.acted=!1,c=u.name,d=m.name,console.log(g),T(),C(),v()},T=()=>{document.getElementById("playerName").innerHTML=""+g.name,document.getElementById("avatarImg").setAttribute("src",""+g.avatar),console.log(playerName),0==g.finishedPlayer&&E(document.getElementById("avatarImg"))},v=()=>{document.getElementById("information").children[0].innerHTML="手札を交換して、言葉を完成させよう！"},C=()=>{const e=document.getElementById("currentPlayerHandCards");let t=0;g.handCards.forEach((function(n){e.children[t].innerHTML=""+n,t++}))},M=()=>{const e=document.getElementById("changeDoneBtn"),t=document.getElementById("changeSkipBtn"),n=document.getElementById("information").children[0];changeStartBtn.onclick=()=>{E(changeStartBtn),E(e),E(t),n.innerHTML="カードを決めたら「交換する」ボタンを押そう";const o=document.getElementById("currentPlayerHandCards").getElementsByTagName("li");Array.prototype.slice.call(o).forEach(t=>t.onclick=()=>{!function(e){0!=g.changesLeft&&(e.classList.contains("is-select")?e.classList.remove("is-select"):(e.classList.add("is-select"),console.log("is-select作動")))}(t),1===document.querySelectorAll(".js_handCards > .is-select").length?(e.removeAttribute("disabled"),n.innerHTML="カードを決めたら「交換する」ボタンを押そう",console.log("カード選択数 １ (OK)")):0===document.querySelectorAll(".js_handCards > .is-select").length?(e.setAttribute("disabled",!0),n.innerHTML="交換するカードを選ぼう！",console.log("カード未選択")):(e.setAttribute("disabled",!0),n.innerHTML="選ぶのは一枚だけだよ！",console.log("カード選択数２〜５"))}),4===m.changesLeft&&k()}},k=()=>{const e=document.getElementById("changeDoneBtn"),t=document.getElementById("changeSkipBtn"),n=document.getElementById("changeStartBtn2"),a=document.getElementById("information").children[0];e.onclick=()=>{function e(e){const t=document.querySelector(".js_handCards > .is-select");t.innerHTML="",t.innerHTML=o[e],t.classList.remove("is-select"),console.log("入れ替え関数動作！")}function r(){const e=document.getElementById("firstDiscard"),t=document.getElementById("secondDiscard");let n=document.querySelector("#currentPlayerHandCards > .is-select");switch(g.finishedPlayer){case 0:let o=document.createElement("li");e.appendChild(o),e.lastElementChild.innerHTML=n.textContent;break;case 1:let a=document.createElement("li");t.appendChild(a),t.lastElementChild.innerHTML=n.textContent}}console.log("cardChangeDone発動。残り交換数⤵︎"),console.log(g.changesLeft);let l=document.querySelectorAll("#currentPlayerHandCards .is-select");const c=document.getElementById("changeDoneBtn");switch(1==l.length?(I(c,!1),console.log("no-block!")):1!=l.length&&(I(c,!0),console.log("block!")),g.changesLeft){case 4:r(),console.log("case4: 現在のプレイヤーの状態⤵︎"),console.log(g),"とり"===g.name?e(0):"いぬ"===g.name&&e(4),g.changesLeft=3,a.innerHTML="交換したいカードを選ぼう！ あと４回！";break;case 3:r(),console.log("SWITCH文内 LEFT:3"),a.innerHTML="交換したいカードを選ぼう！ あと３回！","とり"===g.name?e(1):"いぬ"===g.name&&e(5),g.changesLeft=2;break;case 2:r(),console.log("SWITCH文内 LEFT:2"),a.innerHTML="交換したいカードを選ぼう！ あと２回！","とり"===g.name?e(2):"いぬ"===g.name&&e(6),g.changesLeft=1;break;case 1:r(),console.log("SWITCH文内 LEFT:1"),a.innerHTML="交換したいカードを選ぼう！ これがラスチャン！","とり"===g.name?e(3):"いぬ"===g.name&&e(7),g.changesLeft=0,x()}g.changesLeft>=1?(E(c),E(n),a.innerHTML="まだ交換する場合はボタンを押してね",console.log("if Left >= 1")):(console.log("else"),t.classList.add("is-hidden"))}},H=()=>{const e=document.getElementById("changeDoneBtn"),t=document.getElementById("changeStartBtn2");t.onclick=()=>{console.log("moreCardChangeDone発動");const n=document.getElementById("information").children[0];E(t),E(e),n.innerHTML="交換するカードを選ぼう！"}},P=()=>{const e=document.getElementById("changeSkipBtn"),t=document.getElementById("changeStartBtn2");e.onclick=()=>{x(),t.classList.add("is-hidden"),E(e),g.changesLeft=0,console.log("changeSkip発動")}};function x(){const e=document.getElementById("changeDoneBtn"),t=document.getElementById("changeStartBtn2"),n=document.getElementById("information").children[0];t.classList.add("is-hidden"),e.setAttribute("disabled",!0),e.classList.add("is-hidden"),n.innerHTML="交換終了！<ここに次のアナウンス>",E(toSortWindowBtn),function(){const e=document.getElementById("currentPlayerHandCards");let t=0;g.handCards=[],t=0;for(let n=5;n--;0!=n){let n=e.children[t].textContent;t++,g.handCards.push(n)}console.log(g.handCards),t=0,g.handCards.forEach((function(e){currentPlayerSortBefore.children[t].innerHTML=""+e,t++}))}(),console.log("changeEnd関数 発動");const o=document.querySelectorAll(".js_handCards > .is-select");o&&o.forEach(e=>e.classList.remove("is-select"))}const N=()=>{document.getElementById("toSortWindowBtn").onclick=()=>{g.gameStage="sortStage",g.ReScrollPoint="sort",h()}};function w(){const e=document.getElementById("currentPlayerSortBefore").getElementsByTagName("li"),t=Array.prototype.slice.call(e);let n=[],o=0;t.forEach(e=>e.onclick=()=>{if(n.length<5&&(n.splice(o,0,e.textContent),document.getElementById("currentPlayerSortAfter").children[o].innerHTML=""+n[o],o++),0!=o&&5!=o)g.sortNow=!0,console.log(g.sortNow);else if(5===o){g.sortNow=!1,console.log(g.sortNow),document.getElementById("toDescriptionBtn").removeAttribute("disabled"),w()}console.log("num: "+o)})}const D=()=>{const e=document.getElementById("sortResetBtn");g.sortNow=!1,e.onclick=()=>{document.getElementById("toDescriptionBtn").setAttribute("disabled",!0),w();const e=document.getElementById("currentPlayerSortAfter").getElementsByTagName("li");Array.prototype.slice.call(e).forEach(e=>e.innerHTML=""),console.log("並べ替えやり直し")}},R=()=>{const e=document.getElementById("toDescriptionBtn");e.onclick=()=>{const t=document.getElementById("currentPlayerSortAfter"),n=document.getElementById("descriptionDisplayAreaA"),o=t.cloneNode(!0);n.appendChild(o);const a=document.querySelector("#descriptionDisplayAreaA > ul");a.removeAttribute("id"),a.setAttribute("id","displayCards"),a.classList.remove("c-hand-cards-large"),a.classList.add("c-display-hand-cards"),_(),q(),g.sortEnd=!0,e.setAttribute("disabled",!0),g.gameStage="descriptionStage",g.ReScrollPoint="description",h()}},_=()=>{const e=document.getElementById("descriptionAvatarImg");console.log(e),e.setAttribute("src",g.avatar)},q=()=>{g.handCards=[];const e=document.getElementById("displayCards").getElementsByTagName("li");Array.prototype.slice.call(e).forEach(e=>g.handCards.push(e.textContent))},F=()=>{document.getElementById("backToSortBtn").onclick=()=>{const e=document.getElementById("displayCards");e.parentNode.removeChild(e),g.sortEnd=!1,document.getElementById("toDescriptionBtn").removeAttribute("disabled"),g.gameStage="sortStage",g.ReScrollPoint="sort",h()}},j=()=>{const e=document.getElementById("descriptionWriteArea"),t=document.getElementById("descriptionDisplayAreaB");e.addEventListener("keyup",(function(){console.log(""+e.value);let n=e.value;t.innerHTML=""+n.replace(/\n/g,"</br>").replace(/ /g,"&nbsp;").replace(/<(script|\/script)>/,"*****インラインスクリプトは不許可*****").replace(/<(style|\/style)>/,"*****インラインスタイルは不許可*****")}))},O=()=>{const e=document.getElementById("descriptionDisplayAreaB"),t=document.getElementById("styleLeft"),n=document.getElementById("styleCenter"),o=document.getElementById("styleRight"),a=document.getElementById("styleColorPicker"),r=document.getElementById("openPopFontsize"),l=document.getElementById("popToolbarFontsize"),c=document.getElementById("styleLarge"),d=document.getElementById("styleMedium"),i=document.getElementById("styleSmall");t.onclick=()=>{e.style.textAlign="left",L(t),"true"==n.getAttribute("aria-expanded")&&L(n),"true"==o.getAttribute("aria-expanded")&&L(o)},n.onclick=()=>{e.style.textAlign="center",L(n),"true"==t.getAttribute("aria-expanded")&&L(t),"true"==o.getAttribute("aria-expanded")&&L(o)},o.onclick=()=>{e.style.textAlign="right",L(o),"true"==t.getAttribute("aria-expanded")&&L(t),"true"==n.getAttribute("aria-expanded")&&L(n)},r.addEventListener("click",e=>{E(l),L(r)}),c.onclick=()=>{e.style.fontSize="35px",e.style.lineHeight="35px",L(c),"true"==d.getAttribute("aria-expanded")&&L(d),"true"==i.getAttribute("aria-expanded")&&L(i)},d.onclick=()=>{e.style.fontSize="20px",e.style.lineHeight="20px",L(d),"true"==c.getAttribute("aria-expanded")&&L(c),"true"==i.getAttribute("aria-expanded")&&L(i)},i.onclick=()=>{e.style.fontSize="15px",e.style.lineHeight="15px",L(i),"true"==c.getAttribute("aria-expanded")&&L(c),"true"==d.getAttribute("aria-expanded")&&L(d)},a.addEventListener("change",t=>{const n=t.target.value;e.style.color=n})},W=()=>{const e=document.getElementById("finishBtn"),t=document.getElementById("finishModalDone"),n=document.getElementById("finishModalCancel");e.onclick=()=>{const e=document.getElementById("finishModalTextFirst"),t=document.getElementById("finishModalTextSecond");switch(g.finishedPlayer){case 0:E(t);break;case 1:e.classList.add("is-hidden"),t.classList.remove("is-hidden")}E(finishModal)},n.onclick=()=>{E(finishModal)},t.onclick=()=>{if(0==g.finishedPlayer){const t=document.getElementById("deliverablesA"),n=document.querySelector("#descriptionDisplayAreaA > ul"),o=document.getElementById("descriptionDisplayAreaB"),a=n.cloneNode(!0),r=o.cloneNode(!0);console.log(t),t.appendChild(a),t.appendChild(r);const l=document.querySelector("#deliverablesA > ul"),c=document.querySelector("#deliverablesA > aside");l.removeAttribute("id"),c.removeAttribute("id"),l.setAttribute("id","resultCardsA"),c.setAttribute("id","resultDescA"),(e=document.createElement("img")).src=g.avatar,e.alt="player_avatar_image",document.getElementById("resultAvatarA").appendChild(e),document.getElementById("resultAvatarA").appendChild(e),document.getElementById("resultPlayerNameA").classList.add("c-avatar__name"),document.getElementById("resultPlayerNameA").innerHTML=g.name;const i=document.getElementById("firstPlayerResultA"),s=document.getElementById("secondPlayerResultA");i.innerHTML=g.name,s.innerHTML=g.name,z(),K(),E(finishModal),U(),G(),console.log("Player2のターンへ"),g.gameStage="firstStage",g.ReScrollPoint="first",h();const m=document.getElementById("startFlag"),u=document.querySelector("#startFlag p");m.classList.remove("is-hidden"),m.setAttribute("aria-expanded",!1),u.textContent=d+"さんのターン",setTimeout((function(){m.setAttribute("aria-expanded",!0)}),10),setTimeout((function(){m.animate({opacity:[1,0,1]},{duration:1700,iterations:1})}),50),setTimeout((function(){m.animate({opacity:[1,0]},{duration:2e3,easing:"ease-in-out",fill:"forwards"})}),1750),setTimeout((function(){m.classList.add("is-hidden")}),5e3)}else if(1==g.finishedPlayer){console.log("判定Windowへ");const t=document.getElementById("deliverablesB"),n=document.querySelector("#descriptionDisplayAreaA > ul"),o=document.getElementById("descriptionDisplayAreaB"),a=n.cloneNode(!0),r=o.cloneNode(!0);t.appendChild(a),t.appendChild(r);const l=document.querySelector("#deliverablesB > ul"),c=document.querySelector("#deliverablesB > aside");var e;l.removeAttribute("id"),c.removeAttribute("id"),l.setAttribute("id","resultCardsB"),c.setAttribute("id","resultDescB"),(e=document.createElement("img")).src=g.avatar,e.alt="player_avatar_image",document.getElementById("resultAvatarB").appendChild(e),document.getElementById("resultAvatarB").appendChild(e),document.getElementById("resultPlayerNameB").classList.add("c-avatar__name"),document.getElementById("resultPlayerNameB").innerHTML=g.name;const d=document.getElementById("firstPlayerResultB"),i=document.getElementById("secondPlayerResultB");d.innerHTML=g.name,i.innerHTML=g.name,z(),K(),E(finishModal),U(),console.log(g),console.log(m),console.log(u),g.gameStage="resultStage",g.ReScrollPoint="resultStage",h(),J()}}},z=()=>{const e=document.getElementById("descriptionDisplayAreaB");g.description=e,g.acted=!0,g.player==m&&(m.sortNow=g.sortNow,m.changesLeft=g.changesLeft,m.handCards=g.handCards,m.description=g.description,m.acted=g.acted),g.player==u&&(u.sortNow=g.sortNow,u.changesLeft=g.changesLeft,u.handCards=g.handCards,u.description=g.description,u.acted=g.acted)},K=()=>{const e=document.getElementById("currentPlayerHandCards").getElementsByTagName("li");Array.prototype.slice.call(e).forEach(e=>e.innerHTML=""),E(document.getElementById("toSortWindowBtn")),E(document.getElementById("changeStartBtn")),E(document.getElementById("setCardsBtn"));const t=document.getElementById("currentPlayerSortBefore").getElementsByTagName("li");Array.prototype.slice.call(t).forEach(e=>e.innerHTML="");const n=document.getElementById("currentPlayerSortAfter").getElementsByTagName("li");Array.prototype.slice.call(n).forEach(e=>e.innerHTML=""),document.getElementById("toDescriptionBtn").setAttribute("disabled",!0);const o=document.getElementById("displayCards");o.parentNode.removeChild(o),document.getElementById("descriptionDisplayAreaB").innerHTML="&nbsp;",document.getElementById("descriptionWriteArea").value=""},U=()=>{g.player==m?(m.acted=!0,g.name="いぬ",g.player=u,g.avatar="./image/inu.png",g.handCards=s,g.description="",g.changesLeft=4,g.sortNow=!1,g.sortEnd=!1,g.acted=!1,g.finishedPlayer=1,g.gameStage="firstStage",g.ReScrollPoint="first"):g.player==u&&(u.acted=!0,g.name="とり",g.player=m,g.avatar="./image/tori.png",g.handCards=s,g.description="",g.changesLeft=4,g.sortNow=!1,g.sortEnd=!1,g.acted=!1,g.finishedPlayer=1,g.gameStage="firstStage",g.ReScrollPoint="first")},G=()=>{const e=document.getElementById("setCardsBtn"),t=document.getElementById("changeStartBtn"),n=document.getElementById("information").children[0];E(t),T(),n.innerHTML=g.name+"さん、手札を引いて下さい！",console.log(g),e.onclick=()=>{C(),E(t),E(e),v()}},J=()=>{const e=document.getElementById("openResultModalBtn"),t=document.getElementById("resultModalFirst"),n=t.querySelector("p"),o=document.getElementById("firstPlayerResultA"),a=document.getElementById("firstPlayerResultB");e.onclick=()=>{n.innerHTML=g.name+"さん、どちらが勝ったと思いますか？",E(t);const e=document.getElementById("resultModalSecond");e.querySelector("p").innerHTML=d+"さん、どちらが勝ったと思いますか？";const r=document.getElementById("secondPlayerResultA"),l=document.getElementById("secondPlayerResultB"),i=document.getElementById("lastResult");o.onclick=()=>{E(t),E(e),r.onclick=()=>{E(e),E(i),i.innerHTML=c+"さんの勝ち！"},l.onclick=()=>{E(e),E(i),i.innerHTML="意地の張り合いもほどほどに。"}},a.onclick=()=>{E(t),E(e),r.onclick=()=>{E(e),E(i),i.innerHTML="素晴らしい讃え合いです！"},l.onclick=()=>{E(e),E(i),i.innerHTML=d+"さんの勝ち！"}}}}}]);